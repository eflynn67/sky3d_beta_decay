<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sky3D: parallel.f90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sky3D
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('parallel_8f90.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Modules</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">parallel.f90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Modules</h2></td></tr>
<tr class="memitem:namespaceparallel"><td class="memItemLeft" align="right" valign="top">module &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html">parallel</a></td></tr>
<tr class="memdesc:namespaceparallel"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module organizes the execution on distributed-memory machines using <code>MPI</code>. Its interface is made such that on sequential machines <code><a class="el" href="parallel_8f90.html">parallel.f90</a></code> can simply be replaced by a special version <code><a class="el" href="sequential_8f90.html">sequential.f90</a></code> which contains a definition of this module generating trivial data. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:af4d1baf7c89b4eb0a8ea52b0d0dffa04"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#af4d1baf7c89b4eb0a8ea52b0d0dffa04">parallel::alloc_nodes</a></td></tr>
<tr class="memdesc:af4d1baf7c89b4eb0a8ea52b0d0dffa04"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine merely allocates the internal arrays of module <code>Parallel</code>.  <a href="namespaceparallel.html#af4d1baf7c89b4eb0a8ea52b0d0dffa04">More...</a><br /></td></tr>
<tr class="separator:af4d1baf7c89b4eb0a8ea52b0d0dffa04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3a47cbcb6f4f85c1cf754b1d85a088b"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#aa3a47cbcb6f4f85c1cf754b1d85a088b">parallel::init_all_mpi</a></td></tr>
<tr class="memdesc:aa3a47cbcb6f4f85c1cf754b1d85a088b"><td class="mdescLeft">&#160;</td><td class="mdescRight"><code>init_all_mpi</code> This subroutine initializes <code>MPI</code> and finds out the number of processors <code>mpi_nprocs</code> as well as the index of the current one <code>mpi_myproc</code>. The flag <code>wflag</code> is set to true only for the processor numbered 0.  <a href="namespaceparallel.html#aa3a47cbcb6f4f85c1cf754b1d85a088b">More...</a><br /></td></tr>
<tr class="separator:aa3a47cbcb6f4f85c1cf754b1d85a088b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac16d0a02c718c0fb956e02b986b638d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#aac16d0a02c718c0fb956e02b986b638d">parallel::associate_nodes</a></td></tr>
<tr class="memdesc:aac16d0a02c718c0fb956e02b986b638d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The first loop in this subroutine distributes the wave functions over the nodes. This is done by looping over the wave functions and assigning one to each processor in turn. When the number of processors has been reached, it restarts from processor 0. This way of allocation is to some extent arbitrary and can be changed.  <a href="namespaceparallel.html#aac16d0a02c718c0fb956e02b986b638d">More...</a><br /></td></tr>
<tr class="separator:aac16d0a02c718c0fb956e02b986b638d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1608a6c6b47142227f92bf4cc49e8268"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a1608a6c6b47142227f92bf4cc49e8268">parallel::collect_densities</a></td></tr>
<tr class="memdesc:a1608a6c6b47142227f92bf4cc49e8268"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine uses the <code>MPI</code> routine <code>mpi_allreduce</code> to sum up the partial densities from the different nodes, using temporary arrays <code>tmp_rho</code> and <code>tmp_current</code> (depending on whether it is a scalar or vector field) in the process.  <a href="namespaceparallel.html#a1608a6c6b47142227f92bf4cc49e8268">More...</a><br /></td></tr>
<tr class="separator:a1608a6c6b47142227f92bf4cc49e8268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a509a54da5b66697fd0276110148543"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a0a509a54da5b66697fd0276110148543">parallel::collect_sp_properties</a></td></tr>
<tr class="memdesc:a0a509a54da5b66697fd0276110148543"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine collects the single-particle properties calculated from the wave functions and thus available only for the local wave functions on each node.  <a href="namespaceparallel.html#a0a509a54da5b66697fd0276110148543">More...</a><br /></td></tr>
<tr class="separator:a0a509a54da5b66697fd0276110148543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23978d1e63ec00b9bd3dd670eaf2a599"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a23978d1e63ec00b9bd3dd670eaf2a599">parallel::finish_mpi</a></td></tr>
<tr class="memdesc:a23978d1e63ec00b9bd3dd670eaf2a599"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is just a wrapper for the <code>MPI</code> finalization call.  <a href="namespaceparallel.html#a23978d1e63ec00b9bd3dd670eaf2a599">More...</a><br /></td></tr>
<tr class="separator:a23978d1e63ec00b9bd3dd670eaf2a599"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aea8cd29f6c725f7bf461446bee12cbe4"><td class="memItemLeft" align="right" valign="top">logical, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#aea8cd29f6c725f7bf461446bee12cbe4">parallel::tmpi</a> =.TRUE.</td></tr>
<tr class="memdesc:aea8cd29f6c725f7bf461446bee12cbe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">a logical variable set to true if <code>MPI</code> parallelization is activated. It is used to turn the calling of all the <code>MPI</code> routines in the code on or off.  <a href="namespaceparallel.html#aea8cd29f6c725f7bf461446bee12cbe4">More...</a><br /></td></tr>
<tr class="separator:aea8cd29f6c725f7bf461446bee12cbe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac01189091dd5785f0aa2cd2eccf49da5"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#ac01189091dd5785f0aa2cd2eccf49da5">parallel::node</a></td></tr>
<tr class="memdesc:ac01189091dd5785f0aa2cd2eccf49da5"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the single-particle state with index <code>i</code> the wave function is stored on computing node <code>node(i)</code>.  <a href="namespaceparallel.html#ac01189091dd5785f0aa2cd2eccf49da5">More...</a><br /></td></tr>
<tr class="separator:ac01189091dd5785f0aa2cd2eccf49da5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61bcbe51b5127c46aa0860c387408293"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a61bcbe51b5127c46aa0860c387408293">parallel::localindex</a></td></tr>
<tr class="memdesc:a61bcbe51b5127c46aa0860c387408293"><td class="mdescLeft">&#160;</td><td class="mdescRight">For the single-particle state with index <code>i</code> the wave function is stored on computing node <code>node(i)</code> and its index on that node is <code>localindex(i)</code>.  <a href="namespaceparallel.html#a61bcbe51b5127c46aa0860c387408293">More...</a><br /></td></tr>
<tr class="separator:a61bcbe51b5127c46aa0860c387408293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01015d2108512a98792e7f4c8a968974"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a01015d2108512a98792e7f4c8a968974">parallel::globalindex</a></td></tr>
<tr class="memdesc:a01015d2108512a98792e7f4c8a968974"><td class="mdescLeft">&#160;</td><td class="mdescRight">tells the index of the single-particle state in the whole array of <code>nstmax</code> states (it could be dimensioned <code>nstloc</code> but is dimensioned as <code>nstmax</code> to make its allocation simpler). So for wave function index <code>i</code> <em> on the local node</em>, <code> i=1..nstloc</code>, the single-particle energy must be obtained using <code> sp_energy(globalindex(i))</code>. <br  />
  <a href="namespaceparallel.html#a01015d2108512a98792e7f4c8a968974">More...</a><br /></td></tr>
<tr class="separator:a01015d2108512a98792e7f4c8a968974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade61ceedeca3207434bc1cd4d9547063"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#ade61ceedeca3207434bc1cd4d9547063">parallel::mpi_nprocs</a></td></tr>
<tr class="memdesc:ade61ceedeca3207434bc1cd4d9547063"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of MPI processes.  <a href="namespaceparallel.html#ade61ceedeca3207434bc1cd4d9547063">More...</a><br /></td></tr>
<tr class="separator:ade61ceedeca3207434bc1cd4d9547063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a941ffc085ec1201ea3d7f16de8aeea08"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#a941ffc085ec1201ea3d7f16de8aeea08">parallel::mpi_ierror</a></td></tr>
<tr class="memdesc:a941ffc085ec1201ea3d7f16de8aeea08"><td class="mdescLeft">&#160;</td><td class="mdescRight">varable for error output of MPI routines.  <a href="namespaceparallel.html#a941ffc085ec1201ea3d7f16de8aeea08">More...</a><br /></td></tr>
<tr class="separator:a941ffc085ec1201ea3d7f16de8aeea08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a0e84f3cb12698da32ceb07d09647e"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceparallel.html#ae3a0e84f3cb12698da32ceb07d09647e">parallel::mpi_myproc</a></td></tr>
<tr class="memdesc:ae3a0e84f3cb12698da32ceb07d09647e"><td class="mdescLeft">&#160;</td><td class="mdescRight">the number of the local MPI process  <a href="namespaceparallel.html#ae3a0e84f3cb12698da32ceb07d09647e">More...</a><br /></td></tr>
<tr class="separator:ae3a0e84f3cb12698da32ceb07d09647e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_23fdee2f6995db16c755697cdf620cf4.html">Code</a></li><li class="navelem"><a class="el" href="parallel_8f90.html">parallel.f90</a></li>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
